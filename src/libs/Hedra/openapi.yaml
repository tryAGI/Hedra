openapi: '3.2.0'
info:
  title: Hedra API
  description: "\n\n## Base URL\nAll paths are referenced from the base URL: `https://mercury.dev.dream-ai.com/api`\n\n## Example usage\n### 1. Upload audio\n`audio_response = requests.post(f\"{BASE_URL}/v1/audio\", headers={'X-API-KEY': API_KEY}, files={'file': open('audio.mp3','rb')})`\n\n### 2. Upload image\n`image_response = requests.post(f\"{BASE_URL}/v1/portrait\", headers={'X-API-KEY': API_KEY}, files={'file': open('img.png','rb')})`\n\n### 3. Generate character video\n`video_response = requests.post(f\"{BASE_URL}/v1/characters\", headers={'X-API-KEY': API_KEY}, json={\"avatarImage\": image_response.json()[\"url\"], \"audioSource\": \"audio\", \"voiceUrl\": audio_response.json()[\"url\"]})`\n\n### 4. Call the Project endpoint to see your project / job status and get access to the URL of your generated character.\n`project_status = requests.get(f\"{BASE_URL}/v1/projects/{project_id}\", headers={'X-API-KEY': API_KEY})`\n\n"
  version: 0.1.0
servers:
  - url: https://mercury.dev.dream-ai.com/api
paths:
  /v1/voices:
    get:
      tags:
        - Voice
      summary: Retrieve available voices
      operationId: api_access_get_voices_v1_voices_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoicesResponseBody'
      security:
        - APIKeyHeader: [ ]
  /v1/audio:
    post:
      tags:
        - Audio
      summary: Upload audio
      operationId: api_access_upload_audio_v1_audio_post
      parameters:
        - name: content-length
          in: header
          schema:
            title: Content-Length
            type: integer
            default: -1
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_api_access_upload_audio_v1_audio_post'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadAudioResponseBody'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - APIKeyHeader: [ ]
  /v1/portrait:
    post:
      tags:
        - Portrait
      summary: Upload image
      operationId: api_access_upload_image_v1_portrait_post
      parameters:
        - name: aspect_ratio
          in: query
          schema:
            title: Aspect Ratio
            type: string
            default: '1:1'
        - name: content-length
          in: header
          schema:
            title: Content-Length
            type: integer
            default: -1
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_api_access_upload_image_v1_portrait_post'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadAudioResponseBody'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - APIKeyHeader: [ ]
  /v1/characters:
    post:
      tags:
        - Characters
      summary: Initialize character generation
      operationId: api_access_initialize_talking_head_avatar_v1_characters_post
      parameters:
        - name: content-length
          in: header
          schema:
            title: Content-Length
            type: integer
            default: -1
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApiGenerateTalkingAvatarRequestBody'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiProjectInitializationResponseBody'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - APIKeyHeader: [ ]
  /v1/projects:
    get:
      tags:
        - Projects
      summary: Get all project for the current user
      operationId: api_access_get_all_user_projects_v1_projects_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserAvatarJobsResponse'
      security:
        - APIKeyHeader: [ ]
  '/v1/projects/{project_id}':
    get:
      tags:
        - Projects
      summary: Get project
      operationId: api_access_get_project_v1_projects__project_id__get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            title: Project Id
            type: string
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AvatarProjectItem'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - APIKeyHeader: [ ]
    delete:
      tags:
        - Projects
      summary: Delete a project
      operationId: api_access_delete_project_v1_projects__project_id__delete
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            title: Project Id
            type: string
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: { }
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - APIKeyHeader: [ ]
  '/v1/projects/{project_id}/sharing':
    post:
      tags:
        - Projects
      summary: Share or unshare a project
      operationId: api_access_share_project_v1_projects__project_id__sharing_post
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            title: Project Id
            type: string
        - name: shared
          in: query
          schema:
            title: Shared
            type: boolean
            default: false
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: { }
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - APIKeyHeader: [ ]
  /healthz:
    get:
      summary: Ping
      operationId: ping_healthz_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: { }
  /ping:
    get:
      summary: Ping
      operationId: ping_ping_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: { }
  /v1/user/register:
    post:
      summary: Register User
      description: "This is the registration endpoint, ported from the golang API.\nHowever, this is using a new url / path (/v1/user/register instead of /register -- which will end up being:\n/api/v1/user/register\nNOTE: this will automatically trigger creating brevo contacts"
      operationId: register_user_v1_user_register_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterUserModel'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /v1/images/text-to-image:
    post:
      summary: Generate Image Endpoint
      description: Generate an image from a text prompt or modify an existing image using advanced parameters.
      operationId: generate_image_endpoint_v1_images_text_to_image_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImageGenerationRequestBody'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImageGenerationResponseBody'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
        - JWTBearer: [ ]
components:
  schemas:
    ApiGenerateTalkingAvatarRequestBody:
      title: ApiGenerateTalkingAvatarRequestBody
      type: object
      properties:
        text:
          title: Text
          type: string
          description: text to convert to audio. Ignored if audio_source is not tts
          default: ''
        voiceId:
          title: Voiceid
          anyOf:
            - type: string
            - type: 'null'
          description: Voice ID
        voiceUrl:
          title: Voiceurl
          anyOf:
            - type: string
            - type: 'null'
          description: URL of audio uploaded using the /v1/audio endpoint
        avatarImage:
          title: Avatarimage
          anyOf:
            - type: string
            - type: 'null'
          description: URL of image uploaded via /v1/portrait or base64-encoded image
        aspectRatio:
          title: Aspectratio
          enum:
            - '1:1'
            - '16:9'
            - '9:16'
          type: string
          description: Desired aspect ratio for the generated video
          default: '1:1'
        audioSource:
          title: Audiosource
          enum:
            - tts
            - audio
          type: string
          description: '`tts` for text to speech or `audio`'
          default: audio
        avatarImageInput:
          anyOf:
            - $ref: '#/components/schemas/AvatarImageInput'
            - type: 'null'
          description: Image metadata
    ApiProjectInitializationResponseBody:
      title: ApiProjectInitializationResponseBody
      required:
        - jobId
      type: object
      properties:
        jobId:
          title: Jobid
          type: string
    AvatarImageInput:
      title: AvatarImageInput
      required:
        - prompt
      type: object
      properties:
        seed:
          title: Seed
          type: integer
        prompt:
          title: Prompt
          type: string
    AvatarProjectItem:
      title: AvatarProjectItem
      required:
        - aspectRatio
      type: object
      properties:
        id:
          title: Id
          anyOf:
            - type: string
            - type: 'null'
        createdAt:
          title: Createdat
          anyOf:
            - type: string
              format: date-time
            - type: 'null'
        username:
          title: Username
          anyOf:
            - type: string
            - type: 'null'
        videoUrl:
          title: Videourl
          anyOf:
            - type: string
            - type: 'null'
        avatarImageUrl:
          title: Avatarimageurl
          anyOf:
            - type: string
            - type: 'null'
        aspectRatio:
          title: Aspectratio
          enum:
            - '1:1'
            - '16:9'
            - '9:16'
          type: string
        text:
          title: Text
          anyOf:
            - type: string
            - type: 'null'
        voiceId:
          title: Voiceid
          anyOf:
            - type: string
            - type: 'null'
        voiceUrl:
          title: Voiceurl
          anyOf:
            - type: string
            - type: 'null'
        userId:
          title: Userid
          anyOf:
            - type: string
            - type: 'null'
        jobType:
          title: Jobtype
          anyOf:
            - type: string
            - type: 'null'
        status:
          anyOf:
            - $ref: '#/components/schemas/AvatarProjectStatus'
            - type: 'null'
        stage:
          title: Stage
          anyOf:
            - type: string
            - type: 'null'
        progress:
          title: Progress
          anyOf:
            - type: number
            - type: 'null'
        errorMessage:
          title: Errormessage
          anyOf:
            - type: string
            - type: 'null'
        audioSource:
          title: Audiosource
          anyOf:
            - type: string
            - type: 'null'
        avatarImageInput:
          title: Avatarimageinput
          anyOf:
            - type: object
            - type: 'null'
        shared:
          title: Shared
          type: boolean
          default: false
    AvatarProjectStatus:
      title: AvatarProjectStatus
      enum:
        - Queued
        - InProgress
        - Completed
        - Failed
      type: string
    Body_api_access_upload_audio_v1_audio_post:
      title: Body_api_access_upload_audio_v1_audio_post
      required:
        - file
      type: object
      properties:
        file:
          title: File
          type: string
          format: binary
    Body_api_access_upload_image_v1_portrait_post:
      title: Body_api_access_upload_image_v1_portrait_post
      required:
        - file
      type: object
      properties:
        file:
          title: File
          type: string
          format: binary
    ControlNet:
      title: ControlNet
      type: object
      properties:
        conditioning_scale:
          title: Conditioning Scale
          anyOf:
            - type: number
            - type: 'null'
        control_mode:
          title: Control Mode
          anyOf:
            - type: string
            - type: 'null'
        begin_step_percent:
          title: Begin Step Percent
          anyOf:
            - type: number
            - type: 'null'
        end_step_percent:
          title: End Step Percent
          anyOf:
            - type: number
            - type: 'null'
        control_guidance_start:
          title: Control Guidance Start
          anyOf:
            - type: number
            - type: 'null'
        control_guidance_end:
          title: Control Guidance End
          anyOf:
            - type: number
            - type: 'null'
    ControlNetUnion:
      title: ControlNetUnion
      type: object
      properties:
        conditioning_scale:
          title: Conditioning Scale
          anyOf:
            - type: number
            - type: 'null'
        control_mode:
          title: Control Mode
          anyOf:
            - type: string
            - type: 'null'
        begin_step_percent:
          title: Begin Step Percent
          anyOf:
            - type: number
            - type: 'null'
        end_step_percent:
          title: End Step Percent
          anyOf:
            - type: number
            - type: 'null'
        control_guidance_start:
          title: Control Guidance Start
          anyOf:
            - type: number
            - type: 'null'
        control_guidance_end:
          title: Control Guidance End
          anyOf:
            - type: number
            - type: 'null'
    GeneratedImage:
      title: GeneratedImage
      required:
        - url
      type: object
      properties:
        url:
          title: Url
          type: string
          description: URL of the generated image
        content_type:
          title: Content Type
          type: string
          description: Content type of the image
          default: image/jpeg
    GetUserAvatarJobsResponse:
      title: GetUserAvatarJobsResponse
      required:
        - projects
      type: object
      properties:
        projects:
          title: Projects
          type: array
          items:
            $ref: '#/components/schemas/AvatarProjectItem'
    GetUserResponse:
      title: GetUserResponse
      required:
        - data
      type: object
      properties:
        data:
          $ref: '#/components/schemas/UserInfo'
    HTTPValidationError:
      title: HTTPValidationError
      type: object
      properties:
        detail:
          title: Detail
          type: array
          items:
            $ref: '#/components/schemas/ValidationError'
    ImageGenerationRequestBody:
      title: ImageGenerationRequestBody
      required:
        - prompt
      type: object
      properties:
        prompt:
          title: Prompt
          type: string
          description: The prompt to generate the image from
        num_inference_steps:
          title: Num Inference Steps
          anyOf:
            - type: integer
            - type: 'null'
          description: Number of inference steps
        controlnets:
          title: Controlnets
          type: array
          items:
            $ref: '#/components/schemas/ControlNet'
          description: List of ControlNet configurations
        controlnet_unions:
          title: Controlnet Unions
          type: array
          items:
            $ref: '#/components/schemas/ControlNetUnion'
          description: List of ControlNet union configurations
        ip_adapters:
          title: Ip Adapters
          type: array
          items:
            $ref: '#/components/schemas/IpAdapter'
          description: List of IP-Adapter configurations
        guidance_scale:
          title: Guidance Scale
          anyOf:
            - type: number
            - type: 'null'
          description: Guidance scale for the generation
        real_cfg_scale:
          title: Real Cfg Scale
          anyOf:
            - type: number
            - type: 'null'
          description: Real CFG scale
        num_images:
          title: Num Images
          anyOf:
            - type: integer
            - type: 'null'
          description: Number of images to generate
        enable_safety_checker:
          title: Enable Safety Checker
          anyOf:
            - type: boolean
            - type: 'null'
          description: Whether to enable safety checker
        reference_strength:
          title: Reference Strength
          anyOf:
            - type: number
            - type: 'null'
          description: Reference strength
        reference_end:
          title: Reference End
          anyOf:
            - type: number
            - type: 'null'
          description: Reference end
        image_url:
          title: Image Url
          anyOf:
            - type: string
            - type: 'null'
          description: Optional source image URL for image-to-image generation
        strength:
          title: Strength
          anyOf:
            - type: number
            - type: 'null'
          description: Strength of the conditioning
        aspect_ratio:
          title: Aspect Ratio
          enum:
            - '1:1'
            - '16:9'
            - '9:16'
          type: string
          description: Desired aspect ratio for the generated image
          default: '16:9'
        seed:
          title: Seed
          type: integer
          description: Seed for the generation
    ImageGenerationResponseBody:
      title: ImageGenerationResponseBody
      required:
        - images
        - prompt
      type: object
      properties:
        images:
          title: Images
          type: array
          items:
            $ref: '#/components/schemas/GeneratedImage'
          description: The generated image files info
        timings:
          anyOf:
            - $ref: '#/components/schemas/Timings'
            - type: 'null'
          description: Timing information
        seed:
          title: Seed
          anyOf:
            - type: integer
            - type: 'null'
          description: Seed used for generation
        has_nsfw_concepts:
          title: Has Nsfw Concepts
          anyOf:
            - type: array
              items:
                type: boolean
            - type: 'null'
          description: Whether images contain NSFW concepts
        prompt:
          title: Prompt
          type: string
          description: The prompt used for generating the image
      description: Response body for image generation requests
    IpAdapter:
      title: IpAdapter
      type: object
      properties:
        image_url:
          title: Image Url
          anyOf:
            - type: string
            - type: 'null'
        weight:
          title: Weight
          anyOf:
            - type: number
            - type: 'null'
    RegisterUserModel:
      title: RegisterUserModel
      required:
        - residence_not_blocked
        - tos_accepted
        - tos_version
      type: object
      properties:
        residence_not_blocked:
          title: Residence Not Blocked
          type: string
        tos_accepted:
          title: Tos Accepted
          type: boolean
        tos_version:
          title: Tos Version
          type: string
        marketing_email_consent:
          title: Marketing Email Consent
          anyOf:
            - type: string
            - type: 'null'
          default: NONE
        ai_training_opt_out:
          title: Ai Training Opt Out
          type: boolean
          default: false
    TierLimits:
      title: TierLimits
      required:
        - maxInputLength
        - maxAudioDuration
      type: object
      properties:
        maxInputLength:
          title: Maxinputlength
          type: integer
        maxAudioDuration:
          title: Maxaudioduration
          type: integer
    Timings:
      title: Timings
      required:
        - total
      type: object
      properties:
        total:
          title: Total
          type: number
          description: Total time taken for generation
      description: Timing information for the generation process
    UploadAudioResponseBody:
      title: UploadAudioResponseBody
      required:
        - url
      type: object
      properties:
        url:
          title: Url
          type: string
    UserInfo:
      title: UserInfo
      required:
        - userId
        - avatarConsent
        - aiTrainingOptOut
      type: object
      properties:
        userId:
          title: Userid
          type: string
        username:
          title: Username
          type: string
          default: Unknown
        avatarUrl:
          title: Avatarurl
          anyOf:
            - type: string
            - type: 'null'
        accountTier:
          title: Accounttier
          type: string
          default: free
        apiAccountTier:
          title: Apiaccounttier
          type: string
          default: free
        webSubscriptionEnd:
          title: Websubscriptionend
          anyOf:
            - type: integer
            - type: 'null'
        avatarProjectCreditUsed:
          title: Avatarprojectcreditused
          type: integer
          default: 0
        avatarProjectCreditLimit:
          title: Avatarprojectcreditlimit
          type: integer
          default: 250
        avatarProjectWebCreditUsed:
          title: Avatarprojectwebcreditused
          type: integer
          default: 0
        avatarProjectWebCreditLimit:
          title: Avatarprojectwebcreditlimit
          type: integer
          default: 0
        allowWebCreditOverages:
          title: Allowwebcreditoverages
          type: boolean
          default: false
        webCreditOverageMax:
          title: Webcreditoveragemax
          type: integer
          default: 300
        allowApiCreditOverages:
          title: Allowapicreditoverages
          type: boolean
          default: false
        apiCreditOverageMax:
          title: Apicreditoveragemax
          type: integer
          default: 300
        avatarConsent:
          title: Avatarconsent
          type: boolean
        subscriptionState:
          title: Subscriptionstate
          anyOf:
            - type: string
            - type: 'null'
        tosAcceptableDate:
          title: Tosacceptabledate
          anyOf:
            - type: string
            - type: 'null'
        tosAcceptedVersion:
          title: Tosacceptedversion
          anyOf:
            - type: string
            - type: 'null'
        apiSubscriptionState:
          title: Apisubscriptionstate
          anyOf:
            - type: string
            - type: 'null'
        apiTOSAcceptance:
          title: Apitosacceptance
          anyOf:
            - type: boolean
            - type: 'null'
          default: false
        marketingEmailConsent:
          title: Marketingemailconsent
          type: string
          default: NONE
        aiTrainingOptOut:
          title: Aitrainingoptout
          type: boolean
        residenceLegalConfirmed:
          title: Residencelegalconfirmed
          type: string
          default: NONE
        dresidenceLegalUpdatedAt:
          title: Dresidencelegalupdatedat
          anyOf:
            - type: string
            - type: 'null'
        tierLimits:
          default:
            maxInputLength: 300
            maxAudioDuration: 30000
          $ref: '#/components/schemas/TierLimits'
    ValidationError:
      title: ValidationError
      required:
        - loc
        - msg
        - type
      type: object
      properties:
        loc:
          title: Location
          type: array
          items:
            anyOf:
              - type: string
              - type: integer
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
    Voice:
      title: Voice
      required:
        - voice_id
        - service
      type: object
      properties:
        voice_id:
          title: Voice Id
          type: string
        service:
          title: Service
          anyOf:
            - const: eleven
              enum:
                - eleven
              type: string
            - const: cartesia
              enum:
                - cartesia
              type: string
        name:
          title: Name
          anyOf:
            - type: string
            - type: 'null'
        description:
          title: Description
          anyOf:
            - type: string
            - type: 'null'
        labels:
          title: Labels
          anyOf:
            - type: object
              additionalProperties:
                type: string
            - type: 'null'
        preview_url:
          title: Preview Url
          anyOf:
            - type: string
            - type: 'null'
        premium:
          title: Premium
          type: boolean
          default: false
        user_id:
          title: User Id
          anyOf:
            - type: string
            - type: 'null'
        created_at:
          title: Created At
          anyOf:
            - type: string
              format: date-time
            - type: 'null'
        updated_at:
          title: Updated At
          anyOf:
            - type: string
              format: date-time
            - type: 'null'
    VoicesResponseBody:
      title: VoicesResponseBody
      required:
        - supported_voices
      type: object
      properties:
        supported_voices:
          title: Supported Voices
          type: array
          items:
            $ref: '#/components/schemas/Voice'
  securitySchemes:
    APIKeyHeader:
      type: apiKey
      name: X-API-Key
      in: header
    JWTBearer:
      type: http
      scheme: bearer
security:
  - APIKeyHeader: [ ]